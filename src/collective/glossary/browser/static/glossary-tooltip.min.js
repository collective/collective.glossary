define("collective-glossary-tooltip",["jquery"],function(e){"use strict";return function(){var t=!1,i=!1;e(".glossarizer_replaced").bind("mouseenter",function(){if(t=e(this),tip=t.attr("title"),i=e('<div id="tooltip"></div>'),!tip||""==tip)return!1;t.removeAttr("title"),i.css("opacity",0).html(tip).appendTo("body");var o=function(){e(window).width()<1.5*i.outerWidth()?i.css("max-width",e(window).width()/2):i.css("max-width",340);var o=t.offset().left+t.outerWidth()/2-i.outerWidth()/2,r=t.offset().top-i.outerHeight()-20;o<0?(o=t.offset().left+t.outerWidth()/2-20,i.addClass("left")):i.removeClass("left"),o+i.outerWidth()>e(window).width()?(o=t.offset().left-i.outerWidth()+t.outerWidth()/2+20,i.addClass("right")):i.removeClass("right"),r<0?(r=t.offset().top+t.outerHeight(),i.addClass("top")):i.removeClass("top"),i.css({left:o,top:r}).animate({top:"+=10",opacity:1},50)};o(),e(window).resize(o);var r=function(){i.animate({top:"-=10",opacity:0},50,function(){e(this).remove()}),t.attr("title",tip)};t.bind("mouseleave",r),i.bind("click",r)})}}),define("/home/daggelpop/projects/apef/buildout.apef.tutorat/src/collective.glossary/src/collective/glossary/browser/static/tooltip.js",function(){}),define("collective-glossary-main",["jquery","collective-glossary-tooltip","collective-glossary-jquery-glossarize"],function(e,t){"use strict";e(function(){var i=e("body").attr("data-portal-url");e("#content-core").glossarizer({sourceURL:i+"/@@glossary",callback:function(){new t}})})}),define("/home/daggelpop/projects/apef/buildout.apef.tutorat/src/collective.glossary/src/collective/glossary/browser/static/main.js",function(){}),define("collective-glossary-tooltip",["jquery"],function(e){"use strict";return function(){var t=!1,i=!1;e(".glossarizer_replaced").bind("mouseenter",function(){if(t=e(this),tip=t.attr("title"),i=e('<div id="tooltip"></div>'),!tip||""==tip)return!1;t.removeAttr("title"),i.css("opacity",0).html(tip).appendTo("body");var o=function(){e(window).width()<1.5*i.outerWidth()?i.css("max-width",e(window).width()/2):i.css("max-width",340);var o=t.offset().left+t.outerWidth()/2-i.outerWidth()/2,r=t.offset().top-i.outerHeight()-20;o<0?(o=t.offset().left+t.outerWidth()/2-20,i.addClass("left")):i.removeClass("left"),o+i.outerWidth()>e(window).width()?(o=t.offset().left-i.outerWidth()+t.outerWidth()/2+20,i.addClass("right")):i.removeClass("right"),r<0?(r=t.offset().top+t.outerHeight(),i.addClass("top")):i.removeClass("top"),i.css({left:o,top:r}).animate({top:"+=10",opacity:1},50)};o(),e(window).resize(o);var r=function(){i.animate({top:"-=10",opacity:0},50,function(){e(this).remove()}),t.attr("title",tip)};t.bind("mouseleave",r),i.bind("click",r)})}}),define("collective-glossary-jquery-glossarize",["jquery"],function(e){"use strict";function t(t,i){var r=this;r.el=t,r.$el=e(t),r.options=e.extend({},o,i),r.terms=[],r.excludes=[],r.replaced=[],r.regexOption=r.options.replaceOnce?"i":"ig",e.getJSON(this.options.sourceURL).then(function(e){if(r.glossary=e,r.glossary.length&&0!=r.glossary.length){for(var t=0;t<r.glossary.length;t++)for(var i=r.glossary[t].term.split(","),o=0;o<i.length;o++){var s=i[o].replace(/^\s+|\s+$/g,""),a=s.indexOf("!");-1==a||0!=a?r.terms.push(s):r.excludes.push(s.substr(1))}r.wrapTerms()}})}function i(t,i,o){if("string"!=typeof t)return e.inArray.apply(this,arguments);if(i){var r=i.length;for(o=o?o<0?Math.max(0,r+o):o:0,t=t.toLowerCase();o<r;o++)if(o in i&&i[o].toLowerCase()==t)return o}return-1}var o={sourceURL:"",replaceTag:"abbr",lookupTagName:"p, ul, a, div",callback:null,replaceOnce:!1,replaceClass:"glossarizer_replaced"};t.prototype={getDescription:function(e){for(var t=new RegExp("(^s*)"+this.clean(e)+"\\s*|\\,$","i"),i=0;i<this.glossary.length;i++)if(this.glossary[i].term.match(t))return this.glossary[i].description.replace(/\"/gi,"&quot;")},clean:function(e){var t=new RegExp("(\\"+["/",".","*","+","?","(",")","[","]","{","}","\\"].join("|\\")+")","g");return e.replace(t,"\\$1")},wrapTerms:function(){this.cleanedTerms=this.clean(this.terms.join("|")),this.excludedTerms=this.clean(this.excludes.join("|"));for(var e=this.el.querySelectorAll(this.options.lookupTagName),t=0;t<e.length;t++)this.traverser(e[t]);this.options.callback&&this.options.callback.call(this.$el)},traverser:function(t){var o,r=this;if(1===t.nodeType){if(t=t.firstChild)do{o=t.nextSibling,t.className!=this.options.replaceClass&&this.traverser(t)}while(t=o)}else if(3===t.nodeType){if("form.widgets.IRichText.text"==t.parentNode.name)return;var s=document.createElement("div"),a=t.data,l=new RegExp("(?:^|\\b)("+this.cleanedTerms+")(?!\\w)",r.regexOption),n=new RegExp("(?:^|\\b)("+this.excludedTerms+")(?!\\w)",r.regexOption);if(l.test(a)){var c=n.exec(a);for(a=a.replace(l,function(e,t,o,s){if(r.options.replaceOnce&&i(e,r.replaced)>=0)return e;if(r.replaced.push(e),new RegExp("(?:^|\\b)"+r.clean(e)+"(?!\\w)").exec(a)){if(c&&r.excludes.length){var l=o,n=c.index,p=c.index+c[0].length;return n<=l&&l<=p?e:"<"+r.options.replaceTag+' class="'+r.options.replaceClass+'" title="'+r.getDescription(e)+'">'+e+"</"+r.options.replaceTag+">"}return"<"+r.options.replaceTag+' class="'+r.options.replaceClass+'" title="'+r.getDescription(e)+'">'+e+"</"+r.options.replaceTag+">"}}),e(s).html(a);s.firstChild;)t.parentNode.insertBefore(s.firstChild,t);t.parentNode.removeChild(t)}}}};var r={destroy:function(){this.$el.removeData("plugin_glossarizer"),this.$el.find("."+this.options.replaceClass).each(function(){var t=e(this),i=t.text();t.replaceWith(i)})}};t.prototype=e.extend({},t.prototype,r),e.fn.glossarizer=function(i){return this.each(function(){var o=e(this).data("plugin_glossarizer");"string"==typeof i&&o&&r.hasOwnProperty(i)?o[i].apply(o):(o&&o.destroy.apply(o),e.data(this,"plugin_glossarizer",new t(this,i)))})}}),define("collective-glossary-main",["jquery","collective-glossary-tooltip","collective-glossary-jquery-glossarize"],function(e,t){"use strict";e(function(){var i=e("body").attr("data-portal-url");e("#content-core").glossarizer({sourceURL:i+"/@@glossary",callback:function(){new t}})})}),require(["collective-glossary-main"],function(e){"use strict"}),define("/home/daggelpop/projects/apef/buildout.apef.tutorat/src/collective.glossary/src/collective/glossary/browser/static/bundle.js",function(){});
//# sourceMappingURL=glossary-tooltip.min.js.map